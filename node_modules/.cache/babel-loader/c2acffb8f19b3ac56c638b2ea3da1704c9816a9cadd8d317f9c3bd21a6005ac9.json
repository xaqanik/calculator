{"ast":null,"code":"import { factory } from '../../utils/factory.js';\nimport { isMatrix } from '../../utils/is.js';\nvar name = 'dot';\nvar dependencies = ['typed', 'addScalar', 'multiplyScalar', 'conj', 'size'];\nexport var createDot = /* #__PURE__ */factory(name, dependencies, _ref => {\n  var {\n    typed,\n    addScalar,\n    multiplyScalar,\n    conj,\n    size\n  } = _ref;\n  /**\n   * Calculate the dot product of two vectors. The dot product of\n   * `A = [a1, a2, ..., an]` and `B = [b1, b2, ..., bn]` is defined as:\n   *\n   *    dot(A, B) = conj(a1) * b1 + conj(a2) * b2 + ... + conj(an) * bn\n   *\n   * Syntax:\n   *\n   *    math.dot(x, y)\n   *\n   * Examples:\n   *\n   *    math.dot([2, 4, 1], [2, 2, 3])       // returns number 15\n   *    math.multiply([2, 4, 1], [2, 2, 3])  // returns number 15\n   *\n   * See also:\n   *\n   *    multiply, cross\n   *\n   * @param  {Array | Matrix} x     First vector\n   * @param  {Array | Matrix} y     Second vector\n   * @return {number}               Returns the dot product of `x` and `y`\n   */\n  return typed(name, {\n    'Array | DenseMatrix, Array | DenseMatrix': _denseDot,\n    'SparseMatrix, SparseMatrix': _sparseDot\n  });\n  function _validateDim(x, y) {\n    var xSize = _size(x);\n    var ySize = _size(y);\n    var xLen, yLen;\n    if (xSize.length === 1) {\n      xLen = xSize[0];\n    } else if (xSize.length === 2 && xSize[1] === 1) {\n      xLen = xSize[0];\n    } else {\n      throw new RangeError('Expected a column vector, instead got a matrix of size (' + xSize.join(', ') + ')');\n    }\n    if (ySize.length === 1) {\n      yLen = ySize[0];\n    } else if (ySize.length === 2 && ySize[1] === 1) {\n      yLen = ySize[0];\n    } else {\n      throw new RangeError('Expected a column vector, instead got a matrix of size (' + ySize.join(', ') + ')');\n    }\n    if (xLen !== yLen) throw new RangeError('Vectors must have equal length (' + xLen + ' != ' + yLen + ')');\n    if (xLen === 0) throw new RangeError('Cannot calculate the dot product of empty vectors');\n    return xLen;\n  }\n  function _denseDot(a, b) {\n    var N = _validateDim(a, b);\n    var adata = isMatrix(a) ? a._data : a;\n    var adt = isMatrix(a) ? a._datatype || a.getDataType() : undefined;\n    var bdata = isMatrix(b) ? b._data : b;\n    var bdt = isMatrix(b) ? b._datatype || b.getDataType() : undefined;\n\n    // are these 2-dimensional column vectors? (as opposed to 1-dimensional vectors)\n    var aIsColumn = _size(a).length === 2;\n    var bIsColumn = _size(b).length === 2;\n    var add = addScalar;\n    var mul = multiplyScalar;\n\n    // process data types\n    if (adt && bdt && adt === bdt && typeof adt === 'string' && adt !== 'mixed') {\n      var dt = adt;\n      // find signatures that matches (dt, dt)\n      add = typed.find(addScalar, [dt, dt]);\n      mul = typed.find(multiplyScalar, [dt, dt]);\n    }\n\n    // both vectors 1-dimensional\n    if (!aIsColumn && !bIsColumn) {\n      var c = mul(conj(adata[0]), bdata[0]);\n      for (var i = 1; i < N; i++) {\n        c = add(c, mul(conj(adata[i]), bdata[i]));\n      }\n      return c;\n    }\n\n    // a is 1-dim, b is column\n    if (!aIsColumn && bIsColumn) {\n      var _c = mul(conj(adata[0]), bdata[0][0]);\n      for (var _i = 1; _i < N; _i++) {\n        _c = add(_c, mul(conj(adata[_i]), bdata[_i][0]));\n      }\n      return _c;\n    }\n\n    // a is column, b is 1-dim\n    if (aIsColumn && !bIsColumn) {\n      var _c2 = mul(conj(adata[0][0]), bdata[0]);\n      for (var _i2 = 1; _i2 < N; _i2++) {\n        _c2 = add(_c2, mul(conj(adata[_i2][0]), bdata[_i2]));\n      }\n      return _c2;\n    }\n\n    // both vectors are column\n    if (aIsColumn && bIsColumn) {\n      var _c3 = mul(conj(adata[0][0]), bdata[0][0]);\n      for (var _i3 = 1; _i3 < N; _i3++) {\n        _c3 = add(_c3, mul(conj(adata[_i3][0]), bdata[_i3][0]));\n      }\n      return _c3;\n    }\n  }\n  function _sparseDot(x, y) {\n    _validateDim(x, y);\n    var xindex = x._index;\n    var xvalues = x._values;\n    var yindex = y._index;\n    var yvalues = y._values;\n\n    // TODO optimize add & mul using datatype\n    var c = 0;\n    var add = addScalar;\n    var mul = multiplyScalar;\n    var i = 0;\n    var j = 0;\n    while (i < xindex.length && j < yindex.length) {\n      var I = xindex[i];\n      var J = yindex[j];\n      if (I < J) {\n        i++;\n        continue;\n      }\n      if (I > J) {\n        j++;\n        continue;\n      }\n      if (I === J) {\n        c = add(c, mul(xvalues[i], yvalues[j]));\n        i++;\n        j++;\n      }\n    }\n    return c;\n  }\n\n  // TODO remove this once #1771 is fixed\n  function _size(x) {\n    return isMatrix(x) ? x.size() : size(x);\n  }\n});","map":{"version":3,"names":["factory","isMatrix","name","dependencies","createDot","_ref","typed","addScalar","multiplyScalar","conj","size","_denseDot","_sparseDot","_validateDim","x","y","xSize","_size","ySize","xLen","yLen","length","RangeError","join","a","b","N","adata","_data","adt","_datatype","getDataType","undefined","bdata","bdt","aIsColumn","bIsColumn","add","mul","dt","find","c","i","_c","_i","_c2","_i2","_c3","_i3","xindex","_index","xvalues","_values","yindex","yvalues","j","I","J"],"sources":["/home/xaqanik/test/node_modules/mathjs/lib/esm/function/matrix/dot.js"],"sourcesContent":["import { factory } from '../../utils/factory.js';\nimport { isMatrix } from '../../utils/is.js';\nvar name = 'dot';\nvar dependencies = ['typed', 'addScalar', 'multiplyScalar', 'conj', 'size'];\nexport var createDot = /* #__PURE__ */factory(name, dependencies, _ref => {\n  var {\n    typed,\n    addScalar,\n    multiplyScalar,\n    conj,\n    size\n  } = _ref;\n  /**\n   * Calculate the dot product of two vectors. The dot product of\n   * `A = [a1, a2, ..., an]` and `B = [b1, b2, ..., bn]` is defined as:\n   *\n   *    dot(A, B) = conj(a1) * b1 + conj(a2) * b2 + ... + conj(an) * bn\n   *\n   * Syntax:\n   *\n   *    math.dot(x, y)\n   *\n   * Examples:\n   *\n   *    math.dot([2, 4, 1], [2, 2, 3])       // returns number 15\n   *    math.multiply([2, 4, 1], [2, 2, 3])  // returns number 15\n   *\n   * See also:\n   *\n   *    multiply, cross\n   *\n   * @param  {Array | Matrix} x     First vector\n   * @param  {Array | Matrix} y     Second vector\n   * @return {number}               Returns the dot product of `x` and `y`\n   */\n  return typed(name, {\n    'Array | DenseMatrix, Array | DenseMatrix': _denseDot,\n    'SparseMatrix, SparseMatrix': _sparseDot\n  });\n  function _validateDim(x, y) {\n    var xSize = _size(x);\n    var ySize = _size(y);\n    var xLen, yLen;\n    if (xSize.length === 1) {\n      xLen = xSize[0];\n    } else if (xSize.length === 2 && xSize[1] === 1) {\n      xLen = xSize[0];\n    } else {\n      throw new RangeError('Expected a column vector, instead got a matrix of size (' + xSize.join(', ') + ')');\n    }\n    if (ySize.length === 1) {\n      yLen = ySize[0];\n    } else if (ySize.length === 2 && ySize[1] === 1) {\n      yLen = ySize[0];\n    } else {\n      throw new RangeError('Expected a column vector, instead got a matrix of size (' + ySize.join(', ') + ')');\n    }\n    if (xLen !== yLen) throw new RangeError('Vectors must have equal length (' + xLen + ' != ' + yLen + ')');\n    if (xLen === 0) throw new RangeError('Cannot calculate the dot product of empty vectors');\n    return xLen;\n  }\n  function _denseDot(a, b) {\n    var N = _validateDim(a, b);\n    var adata = isMatrix(a) ? a._data : a;\n    var adt = isMatrix(a) ? a._datatype || a.getDataType() : undefined;\n    var bdata = isMatrix(b) ? b._data : b;\n    var bdt = isMatrix(b) ? b._datatype || b.getDataType() : undefined;\n\n    // are these 2-dimensional column vectors? (as opposed to 1-dimensional vectors)\n    var aIsColumn = _size(a).length === 2;\n    var bIsColumn = _size(b).length === 2;\n    var add = addScalar;\n    var mul = multiplyScalar;\n\n    // process data types\n    if (adt && bdt && adt === bdt && typeof adt === 'string' && adt !== 'mixed') {\n      var dt = adt;\n      // find signatures that matches (dt, dt)\n      add = typed.find(addScalar, [dt, dt]);\n      mul = typed.find(multiplyScalar, [dt, dt]);\n    }\n\n    // both vectors 1-dimensional\n    if (!aIsColumn && !bIsColumn) {\n      var c = mul(conj(adata[0]), bdata[0]);\n      for (var i = 1; i < N; i++) {\n        c = add(c, mul(conj(adata[i]), bdata[i]));\n      }\n      return c;\n    }\n\n    // a is 1-dim, b is column\n    if (!aIsColumn && bIsColumn) {\n      var _c = mul(conj(adata[0]), bdata[0][0]);\n      for (var _i = 1; _i < N; _i++) {\n        _c = add(_c, mul(conj(adata[_i]), bdata[_i][0]));\n      }\n      return _c;\n    }\n\n    // a is column, b is 1-dim\n    if (aIsColumn && !bIsColumn) {\n      var _c2 = mul(conj(adata[0][0]), bdata[0]);\n      for (var _i2 = 1; _i2 < N; _i2++) {\n        _c2 = add(_c2, mul(conj(adata[_i2][0]), bdata[_i2]));\n      }\n      return _c2;\n    }\n\n    // both vectors are column\n    if (aIsColumn && bIsColumn) {\n      var _c3 = mul(conj(adata[0][0]), bdata[0][0]);\n      for (var _i3 = 1; _i3 < N; _i3++) {\n        _c3 = add(_c3, mul(conj(adata[_i3][0]), bdata[_i3][0]));\n      }\n      return _c3;\n    }\n  }\n  function _sparseDot(x, y) {\n    _validateDim(x, y);\n    var xindex = x._index;\n    var xvalues = x._values;\n    var yindex = y._index;\n    var yvalues = y._values;\n\n    // TODO optimize add & mul using datatype\n    var c = 0;\n    var add = addScalar;\n    var mul = multiplyScalar;\n    var i = 0;\n    var j = 0;\n    while (i < xindex.length && j < yindex.length) {\n      var I = xindex[i];\n      var J = yindex[j];\n      if (I < J) {\n        i++;\n        continue;\n      }\n      if (I > J) {\n        j++;\n        continue;\n      }\n      if (I === J) {\n        c = add(c, mul(xvalues[i], yvalues[j]));\n        i++;\n        j++;\n      }\n    }\n    return c;\n  }\n\n  // TODO remove this once #1771 is fixed\n  function _size(x) {\n    return isMatrix(x) ? x.size() : size(x);\n  }\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}